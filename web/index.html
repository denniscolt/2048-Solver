<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>2048 Expectimax (Configurable Start + Manual)</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="wrap">
    <header>
      <h1>2048 Expectimax</h1>
      <p class="sub">Configurable start, <strong>in-place board editing</strong>, and optional <strong>manual spawn</strong>.</p>
    </header>

    <section class="controls">
      <div class="row">
        <label>Start grid (CSV 16 ints, row-major):</label>
        <input id="startCsv" type="text" placeholder="0,0,0,0,0,2,0,0,0,0,2,0,0,0,0,0" />
      </div>
      <div class="row">
        <label>Preferred corner:</label>
        <select id="corner">
          <option value="BL">BL</option>
          <option value="BR">BR</option>
          <option value="TL">TL</option>
          <option value="TR">TR</option>
        </select>
        <label>Depth:</label>
        <input id="depth" type="number" min="1" max="8" value="4" />
        <label>Seed:</label>
        <input id="seed" type="number" placeholder="(optional)" />
      </div>

      <div class="row">
        <button id="btnNew">New Game</button>
        <button id="btnStep">Step</button>
        <button id="btnAuto">Auto Play</button>
        <button id="btnStop" class="ghost">Stop</button>
      </div>

      <div class="row">
        <button id="btnEdit">Edit Board</button>
        <button id="btnDoneEdit" class="ghost">Done Editing</button>
        <label class="spacer"></label>
        <label><input type="checkbox" id="manualMode" /> Manual spawn</label>
        <label>Tile:</label>
        <select id="spawnValue">
          <option value="2">2</option>
          <option value="4">4</option>
          <option value="8">8</option>
          <option value="16">16</option>
        </select>
      </div>
    </section>

    <section class="hud">
      <div>Score: <span id="score">0</span></div>
      <div>Moves: <span id="moves">0</span></div>
      <div>Status: <span id="status">ready</span></div>
    </section>

    <section class="board" id="board"></section>

    <footer>
      <p>Tips: Edit mode — click a cell to cycle 0→2→4→8→… (Shift+click goes backward). Manual spawn — after each move, click an empty cell to place the selected tile.</p>
      <p>Reference: <a href="https://stackoverflow.com/questions/22342854/what-is-the-optimal-algorithm-for-the-game-2048/22389702#22389702" target="_blank">Stack Overflow: Expectimax 2048</a></p>
    </footer>
  </div>
  <script type="module" src="app.js"></script>
</body>
</html>
